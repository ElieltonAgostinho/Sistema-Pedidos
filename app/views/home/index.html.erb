<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">

    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= stylesheet_link_tag    'home', media: 'all', 'data-turbolinks-track': 'reload' %>

    <title>Pedidos</title>
  </head>
  <body>
    
    <div class="header" style=" background-color:#fff; padding: 1em;"><!--Header-->
    	
    	<div class="row">
    		<div class="col-md-7"><h3>Sitema de Pedidos</h3></div>
		  	<div class="col-md" style="align-items: right;">
		  		
		  		<%=image_tag 'person', height: "48", id: 'imgPerson'%>
		  		<p style=""><%=@nome %></p>
		  	</div>
		  	<div class="col-md-2">
		  		<a href="/sair/">Sair</a>
		  	</div>
    	</div>
  			
  	</div>

  	<div class="header" style=" background-color:#454b59;"><!--Menu-->
    	
    	<nav class="navbar navbar-expand-lg navbar-light">
			<div class="container-fluid">
				<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
			    	<span class="navbar-toggler-icon"></span>
			    </button>
			    <div class="collapse navbar-collapse" id="navbarNavDropdown">
			      <ul class="navbar-nav">
			        <li class="nav-item">
			          <a class="nav-link active" aria-current="page" href="#" style="color: #fff;"><u>Pedidos</u></a>
			        </li>
			        <li class="nav-item">
			          <a class="nav-link" href="/cliente/" style="color: #fff;"><u>Cadastrar Cliente</u></a>
			        </li>
			        <li class="nav-item">
			          <a class="nav-link" href="/produto/"  style="color: #fff;"><u>Cadastrar Produto</u></a>
			        </li>
			        
			      </ul>
			    </div>
			</div>
		</nav>

  	</div>

  	<div class="container">
  		
  		
  		<div class="row" style="margin-top: 2em;"><!--Body-->
  			
  			<div class="col-md-1"></div><!--Lado Esquerdo-->

  			<div class="col-md-10"><!--Centro-->
  				<div class="card text-dark bg-light">
  				  <div class="card-body" style="border-bottom: 1px solid #ccc;">
  				  	<%=image_tag 'list', height:'36', id:'imgList' %>
  				  	<p style="color: green; float: left; margin-top: 0.5em;">Pedidos</p>
  				  	<br/>
				  	<a href="/pedido/" class="btn btn-outline-success" style="float: right;">Fazer Novo Pedido</a>
				</div>
				<div class="card-body">

				  	<table class="table ">
					  <thead class="table-light">
					    <tr class="table-active">
					      <th scope="col">Número do Pedido</th>
					      <th scope="col">Cliente</th>
					      <th scope="col">Valor Total</th>
					      <th scope="col">Data</th>
					      <th scope="col"></th>
					    </tr>
					  </thead>
					  <tbody>
					    <%=@linhas %>
					  </tbody>
					</table>
				    
				  </div>
				</div>
  			</div>

  			<div class="col-md-2"></div><!--Lado Direito-->

  		</div>
  		


  		<!-- Modal -->
		<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
		  <div class="modal-dialog">
		    <div class="modal-content">
		      <div class="modal-header">
		        <h5 class="modal-title" id="exampleModalLabel" class="titModal">Pedido: </h5>
		        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
		      </div>
		      <div class="modal-body">
		        <table class="table ">
					<thead class="table-light">
					    <tr class="table-active">
					      <th scope="col">Número Pedido</th>
					      <th scope="col">Produto</th>
					      <th scope="col">Valor</th>
					    </tr>
					</thead>
					<tbody id="retornoTable">
					    
					</tbody>
				</table>
		      </div>
		      
		    </div>
		  </div>
		</div>



  		<div class="row">
  			<small style="margin-top: 1em; color: #7a8ca5; text-align: center;">2021 © Elielton Agosinho / Todos os direitos reservados.</small>
  		</div><!--Footer-->
  	</div>


    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js" integrity="sha384-SR1sx49pcuLnqZUnnPwx6FCym0wLsk5JZuNx2bPPENzswTNFaQU1RDvt3wT4gWFG" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.min.js" integrity="sha384-j0CNLUeiqtyaRmlzUHCPZ+Gy5fQu0dQ6eZ/xAww941Ai1SxSY+0EQqNXNE6DZiVc" crossorigin="anonymous"></script>
    -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	
    

    <script type="text/javascript">
    	$(document).ready(function(){
    		var total = 0;
    		$('.btnDetalhes').click(function() {
    			var codigo = $(this).data('pedido');
    			$.ajax({
					type: "get",
					url: "/home/id",
					data: {id: codigo}
				}).done(function( msg ) {
					$('#retornoTable').empty();
					var html = ''
					$(msg).each(function(index, element) {
						
						html += '<tr><th>'+codigo+'</th><th>'+element.nome+'</th><th>'+element.valor+'</th></tr>';
					 
					});
					
					$('#retornoTable').append(html);
				});
    			
    		});			

		});
    	
    </script>
  </body>
</html>
